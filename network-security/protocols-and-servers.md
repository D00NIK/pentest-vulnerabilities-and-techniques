# Protocols and Servers
There are many protocols out there, each one for a different purpose. The most basic ones have two versions of them: encrypted and plaintext based.

## SSL/TLS (Secure Sockets Layer / Transport Layer Security)
If we use a secure protocol (e.g. HTTPS) it may utilize one of these two. After a successful TCP connection, a client indicates that he want to use a secure connection, and a server responds with its certificate (to provide authenticity of a correct server used for e.g. a domain) and a ServerKeyExchange, used to generate a master password for encrypting. After that client responds with his ClientKeyExchange and from now on the communication is the same as it would in its unencrypted version, but yeah, with encryption.

This is a great way to mitigate MITM (Man-in-the-Middle) attack, where a criminal sits between a client and a server and changes their responses to meet his needs.

## Popular protocols comparison

| Protocol | TCP Port | Application(s)                  | Data Security |
|----------|----------|---------------------------------|---------------|
| FTP      | 21       | File Transfer                   | Cleartext     |
| FTPS     | 990      | File Transfer                   | Encrypted     |
| HTTP     | 80       | Worldwide Web                   | Cleartext     |
| HTTPS    | 443      | Worldwide Web                   | Encrypted     |
| IMAP     | 143      | Email (MDA)                     | Cleartext     |
| IMAPS    | 993      | Email (MDA)                     | Encrypted     |
| POP3     | 110      | Email (MDA)                     | Cleartext     |
| POP3S    | 995      | Email (MDA)                     | Encrypted     |
| SFTP     | 22       | File Transfer                   | Encrypted     |
| SSH      | 22       | Remote Access and File Transfer | Encrypted     |
| SMTP     | 25       | Email (MTA)                     | Cleartext     |
| SMTPS    | 465      | Email (MTA)                     | Encrypted     |
| Telnet   | 23       | Remote Access                   | Cleartext     |

Search how specific protocol works under the hood and for easier ones, like IMAP, you can try using it `telnet` or `netcat`.

## Password and attacks
Even though two-factor authentication is more popular every year, passwords are still widely used, and most of them aren't that unique. <u>Use strong password</u> and <u>different ones for every service</u>. If not, you are just waiting for criminals to broke into your accounts.

### Hydra
[Hydra](https://github.com/vanhauser-thc/thc-hydra) is a command line tool used in our example for a dictionary attack. It's just simply using the most popular passwords for your accounts. That's why it is **THAT** important.

```sh
# hydra -l LOGIN -P PASSWORD_LIST PROTOCOL://MACHINE_IP 
hydra -l mark -P /usr/share/wordlists/rockyou.txt ftp://10.10.189.1
```

This command just says to hydra to try and login with this username, on this protocol, server, with these passwords.

You can use:
- `-s PORT` - to specify non-default port for a protocol
- `-V or -vV` - for verbose output
- `-d` - to show debugging output if verbose one isn't that helpful

### Vulnerabilities
Every server for every service has a vulnerability, only use updated and reliable software! If not, when an attacker finds out (by simply checking fingerprints on connections), he might use a known exploit to e.g. hack into your server.